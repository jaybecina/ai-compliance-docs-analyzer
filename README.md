\

# AI-Powered Compliance Document Analyzer

This project provides a dashboard to upload compliance PDFs and quickly get:

- A plain-English summary
- Key points / topics
- An interactive Q&A experience (ask questions grounded in the uploaded documents)
- Gap analysis between two selected documents

The goal is to reduce time spent reading large compliance documents and help identify missing requirements or mismatches.

## Features

- Authentication: demo login/register backed by SQLite (Drizzle ORM)
- Upload PDFs and extract text (digital text PDFs)
- Summarize documents using an LLM
- Extract key points
- Ask questions about a selected document
- Compare two documents for gap analysis

## Tech stack

- Frontend: React + TypeScript + Vite + Material UI
- Backend: Node.js + TypeScript + Express
- PDF parsing: pdf-parse
- LLM: Anthropic Claude SDK
- Vector database: Pinecone
- Auth DB: SQLite + Drizzle ORM

## Prerequisites

- Node.js 18+
- Anthropic API key
- Pinecone API key and an index configured with dimension 1024

## Setup

1. Install dependencies

```bash
npm install
cd client && npm install && cd ..
```

2. Configure backend environment

Copy the backend template and fill it in:

```bash
cp backend/.env.example backend/.env
```

Required values:

- ANTHROPIC_API_KEY
- PINECONE_API_KEY
- PINECONE_INDEX

Notes:

- backend/.env is gitignored by default. Do not commit secrets.
- The backend reads backend/.env from backend/src/server.ts.

3. Configure frontend environment

Create client/.env:

```bash
cat > client/.env << 'EOF'
VITE_API_URL=http://localhost:8000/api
EOF
```

## Database (SQLite + Drizzle)

User accounts live in a SQLite database at SQLITE_DB_PATH (default: backend/data/app.sqlite).

Generate migrations from the schema:

```bash
npm run db:generate
```

Apply migrations:

```bash
npm run db:migrate
```

If you already ran the backend before migrations existed, baseline the existing DB safely:

```bash
npm run db:migrate:safe
```

Seeding users

Seeding is driven by SEED_USERS_JSON (env var) so credentials are not hardcoded in source.
See backend/.env.example for the JSON format.

```bash
npm run db:seed
```

To reseed from scratch, delete the SQLite file (backend/data/app.sqlite by default) and re-run db:migrate + db:seed.

## Run

Run both backend and frontend together:

```bash
npm run dev
```

URLs:

- Frontend: http://localhost:5173
- Backend API: http://localhost:8000/api

## How to use

1. Login (or Register) and open the dashboard.
2. Upload a PDF.
3. Click an uploaded document to see its summary, key points, full text, and the Q&A box.
4. Upload at least two documents to enable Compare Documents for gap analysis.

## Testing

Automated tests:

```bash
npm run test:coverage
```

Manual API checks (examples):

```bash
curl http://localhost:8000/api/health

curl -X POST http://localhost:8000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"admin123"}'
```

## API documentation

See backend/API.md for the full list of endpoints and request/response examples.

# Terminal 2 - Frontend

npm run dev:frontend

````

The application will be available at:

- **Frontend**: http://localhost:5173
- **Backend**: http://localhost:8000

#### Option 3: Use Quick Start Script

```bash
# Interactive setup and start script
./start.sh
````

## ğŸ§ª Testing the Application

### Quick Test (5 minutes)

1. **Start the application** (see above)
2. **Login** at http://localhost:5173 with `admin`/`admin123`
3. **Upload a PDF** document
4. **View the summary** and key points generated by AI
5. **Ask a question** about the document
6. **Upload a second document** and compare them

### Comprehensive Testing

```bash
# Run automated API tests (backend must be running)
./test-api.sh
```

### Testing Guides

- ğŸ“– **[TESTING.md](./TESTING.md)** - Complete step-by-step testing guide (25 test scenarios)
- âš¡ **[QUICK-TEST.md](./QUICK-TEST.md)** - Quick reference for testing all features
- ğŸ“˜ **[backend/API.md](./backend/API.md)** - Detailed API documentation with examples

### Test Credentials

Use these to test different user roles:

## ğŸ—„ï¸ Database (SQLite + Drizzle)

The backend uses SQLite for user accounts and Drizzle ORM for queries.

### Migrations (recommended)

1. Ensure your DB path is set in [backend/.env.example](backend/.env.example) (copy to `backend/.env`).
2. Generate a migration from the schema in [backend/src/db/schema.ts](backend/src/db/schema.ts):

```bash
npm run db:generate
```

3. Apply migrations to your SQLite DB:

```bash
npm run db:migrate
```

If you already ran the backend before setting up migrations, your SQLite file may already contain tables. In that case, run the safe migrator (it will baseline the DB without deleting data):

```bash
npm run db:migrate:safe
```

### Seeding users

Seeding is driven by `SEED_USERS_JSON` (an env var) so credentials are not hardcoded in source. Example format is documented in [backend/.env.example](backend/.env.example).

```bash
# after setting SEED_USERS_JSON in backend/.env
npm run db:seed
```

To reseed from scratch, delete the SQLite file (by default `backend/data/app.sqlite`) and re-run `db:migrate` + `db:seed`.

## ğŸ“š API Endpoints

### Authentication

- `POST /api/auth/login` - User login

### Documents

- `POST /api/documents/upload` - Upload a PDF document
- `GET /api/documents` - Get all documents
- `GET /api/documents/:id` - Get document by ID

### Q&A

- `POST /api/qa/ask` - Ask a question about documents
  ```json
  {
    "question": "What PPE is required?",
    "docId": "optional-document-id"
  }
  ```

### Comparison

- `POST /api/compare` - Compare two documents
  ```json
  {
    "docIdA": "first-document-id",
    "docIdB": "second-document-id"
  }
  ```

## ğŸ¨ UI/UX Highlights

- **Modern Design**: Clean, professional interface with Material-UI components
- **Responsive**: Works seamlessly on desktop, tablet, and mobile
- **Intuitive**: Easy-to-use drag-and-drop file upload
- **Interactive**: Real-time document analysis and Q&A
- **Visual Feedback**: Loading states, success/error notifications

## ğŸ§ª Testing

```bash
# Run backend tests
npm test

# Run frontend tests
cd client && npm test
```

## ğŸ“¦ Build for Production

```bash
# Build both frontend and backend
npm run build

# Or build separately
npm run build:backend
npm run build:frontend
```

## ğŸ¢ Use Cases

1. **Mining Industry**: Analyze safety procedures and compliance documents
2. **Healthcare**: Review medical protocols and regulatory requirements
3. **Finance**: Compare compliance policies with regulatory standards
4. **Construction**: Ensure safety procedures meet legislation requirements

## ğŸ”§ Technology Stack

### Backend

- Node.js & Express.js
- TypeScript
- Anthropic Claude 3.5 Sonnet
- Pinecone Vector Database
- pdf-parse
- Multer (file uploads)

### Frontend

- React 18
- TypeScript
- Vite
- Material-UI (MUI)
- Axios
- React Router

## ğŸ“ Project Structure

```
ai-compliance-docs-analyzer/
â”œâ”€â”€ backend/
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ controllers/      # Request handlers
â”‚       â”œâ”€â”€ services/         # Business logic & AI integration
â”‚       â”œâ”€â”€ routes/           # API routes
â”‚       â”œâ”€â”€ middleware/       # Express middleware
â”‚       â”œâ”€â”€ utils/            # Utility functions
â”‚       â””â”€â”€ server.ts         # Express server setup
â”œâ”€â”€ client/
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ components/       # React components
â”‚       â”œâ”€â”€ assets/           # Static assets
â”‚       â””â”€â”€ App.tsx           # Main application
â”œâ”€â”€ package.json
â””â”€â”€ README.md
```

## ğŸ¯ Future Enhancements

- [ ] Real authentication with JWT tokens
- [ ] PostgreSQL/MongoDB for persistent storage
- [ ] Support for more document formats (Word, Excel)
- [ ] Advanced analytics dashboard
- [ ] Document version control
- [ ] Export reports as PDF
- [ ] Multi-language support
- [ ] OCR for scanned documents

## ğŸ¤ Contributing

Contributions are welcome! Please feel free to submit a Pull Request.

## ğŸ“„ License

This project is licensed under the ISC License.

## ğŸ‘¥ Author

Created as a demonstration of modern full-stack development with AI integration.

## ğŸ†˜ Troubleshooting

### Common Issues

1. **"Cannot find module" errors**: Run `npm install` in both root and client directories
2. **Anthropic API errors**: Verify your API key is correct and has sufficient credits
3. **Pinecone connection issues**: Ensure your index dimensions match (1024) and the index name is correct
4. **Port already in use**: Change the PORT in .env file or stop other applications using port 8000/5173

### Need Help?

- Check the console for detailed error messages
- Ensure all environment variables are set correctly
- Verify API keys are valid and have appropriate permissions

## ğŸ“Š Performance Considerations

- Document processing time depends on PDF size and Claude API response time
- Embedding generation uses a simplified approach (upgrade to Voyage AI or OpenAI for production)
- In-memory storage will be cleared on server restart (use persistent DB for production)

---

**Built with â¤ï¸ using Claude AI, React, and modern web technologies**
